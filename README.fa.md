## ابزار Raven - کشف ساب‌دامین  

ابزار Raven یک ابزار مدرن، کارآمد و سبک برای شمارش ساب‌دامین‌هاست که برای پژوهشگران امنیت و تست‌کنندگان نفوذ طراحی شده است. این ابزار با زبان Go ساخته شده و تجربه‌ای پایدار و کاربرپسند برای کشف ساب‌دامین‌های یک دامنه هدف فراهم می‌کند، همراه با قابلیت‌های پیشرفته برای کاهش نتایج مثبت کاذب و بهینه‌سازی عملکرد.  

---

### چرا Raven؟  

ابزار Raven نسبت به تکنیک‌های سنتی شمارش ساب‌دامین متمایز است، به دلیل طراحی مدرن و امکانات پیشرفته‌اش.  

#### مزایا نسبت به روش‌های سنتی  

##### کارایی بهینه با درخواست‌های همزمان  
- استفاده از **pool کارگرها** با تعداد ترد قابل تنظیم (`پیش‌فرض: 10، حداکثر: 300`) برای ارسال همزمان درخواست‌های HTTP و کاهش چشمگیر زمان اسکن.  
- پیاده‌سازی محدودیت نرخ (`golang.org/x/time/rate`) برای جلوگیری از فشار بیش از حد روی سرور هدف.  

##### کاهش نتایج مثبت کاذب  
- فیلتر کردن پاسخ‌های پیش‌فرض مانند IIS (`<title>IIS Windows Server</title>`).  
- پشتیبانی از فیلتر وضعیت‌های HTTP (`--filter-status`) و تطابق وضعیت‌ها (`--match-code`).  

##### مدیریت انعطاف‌پذیر لیست کلمات  
- پشتیبانی از لیست کلمات سفارشی با `--wordlist`.  
- دانلود خودکار لیست پیش‌فرض در صورت عدم ارائه.  
- اعتبارسنجی و پاک‌سازی لیست (حذف خطوط خالی و نقاط انتهایی).  

##### پیکربندی پیشرفته  
- پشتیبانی از متدهای HTTP (`--method`)، هدرها (`--header`) و پروکسی‌ها (`--proxy`).  
- حالت اعتبارسنجی (`--validation`) برای نمایش سریع کدهای وضعیت.  

##### بروزرسانی و بررسی نسخه  
- فلگ `--update` آخرین نسخه را مستقیماً از GitHub دریافت و نصب می‌کند.  

---

### چرا کاراتر است؟  
برخلاف ابزارهای قدیمی مبتنی بر DNS ترتیبی، ابزار Raven ترکیب می‌کند:  
- درخواست‌های همزمان HTTP  
- فیلترینگ هوشمند  
- مدیریت بهینه لیست کلمات  
- خروجی ساختاریافته و رنگی    

این ویژگی‌ها باعث می‌شود Raven **سریع‌تر، تمیزتر و قابل‌اعتمادتر** برای تست‌های واقعی باشد.  

---

### منطق و جریان کاری  

#### 1. پردازش فلگ‌ها  
- پردازش فلگ‌ها با `spf13/pflag`.  
- فلگ `--domain` الزامی است.  
- سایر فلگ‌ها (مانند `--wordlist`, `--threads`, `--method`) مقادیر پیش‌فرض منطقی دارند.  

#### 2. مدیریت لیست کلمات  
- در صورت نبود لیست، ابزار Raven به‌طور خودکار لیست پیش‌فرض را از:  
  `https://raw.githubusercontent.com/Nowafen/Raven/refs/heads/main/wordlist.txt`  
  دانلود می‌کند.  
- ورودی‌های نامعتبر به صورت خودکار پاک می‌شوند.  

#### 3. اسکن ساب‌دامین  
- ترکیب ورودی‌های لیست کلمات با دامنه هدف.  
- ارسال درخواست‌های HTTP همزمان همراه با محدودیت نرخ.  
- فیلتر نتایج بی‌ارتباط یا مثبت کاذب.  

#### 4. خروجی نتایج  
- به صورت پیش‌فرض: چاپ ساب‌دامین‌های کشف‌شده.  
- با فعال‌سازی اعتبارسنجی: نمایش کد وضعیت به صورت رنگی.  
- قابلیت ذخیره در فایل با `--output`.  

---

### نصب  

#### از سورس  
```bash
git clone https://github.com/Nowafen/Raven.git
cd Raven
go build -o raven ./cmd/raven
```  

#### با Go  
```bash
go install github.com/Nowafen/Raven/cmd/raven@latest
```  

---

### نحوه استفاده  

اجرای ابزار Raven با فلگ الزامی `--domain` و سایر پارامترهای اختیاری:  

```bash
raven --domain example.com
```  

#### فلگ‌های موجود  

| فلگ              | شورت‌کات | توضیح                                         | پیش‌فرض                       |
|------------------|----------|-----------------------------------------------|-------------------------------|
| `--domain`       | `-d`     | دامنه هدف (الزامی)                           | —                             |
| `--wordlist`     | `-w`     | مسیر فایل لیست کلمات                         | `/tmp/.raven/wordlist.txt`    |
| `--header`       | `-H`     | هدرهای سفارشی HTTP                           | —                             |
| `--method`       | `-m`     | متد HTTP                                      | `GET`                         |
| `--output`       | `-o`     | ذخیره خروجی در فایل                           | —                             |
| `--silent`       | —        | حالت سکوت (بدون بنر/پیشرفت)                  | `false`                       |
| `--filter-status`| `-f`     | فیلتر کدهای وضعیت (با کاما جدا شود)          | —                             |
| `--match-code`   | `-c`     | تطابق کدهای وضعیت مشخص                      | —                             |
| `--proxy`        | —        | آدرس پروکسی                                  | —                             |
| `--threads`      | `-t`     | تعداد تردهای همزمان (حداکثر 300)             | `10`                          |
| `--validation`   | `-v`     | نمایش کد وضعیت در خروجی                      | `false`                       |
| `--update`       | —        | بروزرسانی به آخرین نسخه                      | —                             |
| `--version`      | —        | نمایش نسخه ابزار                             | —                             |
| `--help`         | —        | نمایش راهنما                                  | —                             |

---

### نمونه دستورات  

**اسکن ساده**  
```bash
raven -d example.com
```  

**اسکن با اعتبارسنجی**  
```bash
raven -d example.com -v
```  

**لیست کلمات سفارشی و ترد بیشتر**  
```bash
raven -d example.com -w wordlist.txt -t 50 -v
```  

**فیلتر کدهای خاص**  
```bash
raven -d example.com -f 404,403 
```  

**ذخیره خروجی در فایل**  
```bash
raven -d example.com -o results.txt
```  

**حالت سکوت**  
```bash
raven -d example.com --silent
```  

**بروزرسانی ابزار**  
```bash
raven --update
```  

---

### مشارکت  
مشارکت‌ها خوش‌آمدند! [مخزن GitHub](https://github.com/Nowafen/Raven).  

---

## لایسنس  
ابزار Raven تحت مجوز **BSD 3-Clause License** منتشر شده است. فایل [LICENSE](LICENSE) را ببینید.  
